<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org/"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>

<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no"
>

<link rel="stylesheet"
	th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"
>
<link rel="stylesheet" th:href="@{/assets/style.css}">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
>

<script type="text/javascript" th:src="@{/assets/plotly.min.js}"></script>
<script src="webjars/jquery/3.1.1/jquery.js"></script>
<script src="webjars/bootstrap/js/bootstrap.min.js"></script>
<title>DashBoard</title>

</head>
<body>

	<div class="wrapper">


		<div th:insert="sidebar"></div>

		<div th:insert="botaoSidebar"></div>

		<div class="row">


			<div class="col-lg col-xl">

				<div id="grafico_memoria" class="responsive-plot"></div>

			</div>
			<div class="row" style="height: 75px; width: 100%;"></div>
			<div class="col-lg col-xl">

				<div id="grafico_disco" class="responsive-plot"></div>

			</div>
		</div>
		<div class="row">
			<div class="col-lg col-xl">

				<div id="grafico_cpu" class="responsive-plot"></div>

			</div>
			<div class="row" style="height: 75px; width: 100%;"></div>
			<div class="col-lg col-xl">

				<div id="grafico_rede" class="responsive-plot"></div>

			</div>
		</div>

	</div>



	<script type="text/javascript" th:inline="javascript">
		var memoria = {
			y : 0,
		};

		var linha1 = {
			y : [ memoria.y ],
			mode : 'lines+markers',
			name : 'aa caraio',
			type : 'line',
			line : {
				color : 'rgb(0, 0, 0)',
			}
		};
		var linha2 = {
			y : [ 0 ],
			mode : 'lines',
			line : {
				color : 'white',
			},
			name : ''
		}
		var layout = {
			title : 'Mem RAM'
		};
		var datz2 = [ linha1, linha2 ];
		getData();
		Plotly.newPlot('grafico_memoria', datz2, layout);
		var cnt = 0;
		setInterval(function() {
			getData();
			Plotly.extendTraces('grafico_memoria', {
				y : [ [ memoria.y ] ]
			}, [ 0 ]);
			cnt++;
			if (cnt > 20) {
				Plotly.relayout('grafico_memoria', {
					xaxis : {
						range : [ cnt - 20, cnt ]
					}
				});
			}
		}, 1000);

		function getData() {
			var x = $.getJSON("api/memoria", function(data) {
				memoria.y = data;
			});
		}
	</script>

	<script type="text/javascript" th:inline="javascript">
		var disco = {
			disco1Livre : 0,
			disco1Ocupado : 0,
			disco2Livre : 0,
			disco2Ocupado : 0,
			disco3Livre : 0,
			disco3Ocupado : 0,
			disco4Livre : 0,
			disco4Ocupado : 0,
			disco5Livre : 0,
			disco5Ocupado : 0,
			disco6Livre : 0,
			disco6Ocupado : 0			
		};

		var datz = [ {
			values : [ disco.disco1Livre, disco.disco1Ocupado, disco.disco2Livre, disco.disco2Ocupado, disco.disco3Livre, disco.disco3Ocupado, disco.disco4Livre, disco.disco4Ocupado, disco.disco5Livre, disco.disco5Ocupado, disco.disco6Livre, disco.disco6Ocupado ],
			labels : [ 'Disco Livre', 'Disco Ocupado' ],
			type : 'pie',
			textinfo : "percent",
			hoverinfo : 'label+value',
			marker : {
				colors : [ '#2ED069', 'D02E4E', 'AB00D5', 'C6F700', '5381EC', 'F9B836', 'DC75EC', 'FBFF69', '71ECB3', 'F7A757', 'F75757', '3ABF47']
			}
		} ];
		var layout = {
			title : 'Disco'
		};
		getData();
		Plotly.newPlot('grafico_disco', datz, layout);
		setInterval(function() {
			getData();
			Plotly.newPlot('grafico_disco', datz, layout);
		}, 1000);

		function getData() {

			var y = $.getJSON("api/disco", function(data) {
				datz[0].values = [data[0].discoLivre, data[0].discoUsado, data[1].discoLivre, data[1].discoUsado, data[2].discoLivre, data[2].discoUsado, data[3].discoLivre, data[3].discoUsado, data[4].discoLivre, data[4].discoUsado, data[5].discoLivre, data[5].discoUsado];
				datz[0].labels = ["Livre: " + data[0].partition , "Em uso:" + data[0].partition, "Livre: " + data[1].partition , "Em uso:" + data[1].partition, "Livre: " + data[2].partition , "Em uso:" + data[2].partition, "Livre: " + data[3].partition , "Em uso:" + data[3].partition, "Livre: " + data[4].partition , "Em uso:" + data[4].partition, "Livre: " + data[5].partition , "Em uso:" + data[5].partition];
				console.log(datz);
			});

		}
	</script>

	<script type="text/javascript" th:inline="javascript">
		var memoria = {
			y : 0,
		}

		var linha1 = {
			y : [ memoria.y ],
			mode : 'lines+markers',
			name : 'a',
			type : 'line'
		}
		var linha2 = {
			y : [ 0 ],
			mode : 'lines',
			line : {
				color : 'white',
			},
			name : ''
		}
		var layout = {
			title : '% Mem RAM'
		}
		var datz2 = [ linha1, linha2 ];
		getData();
		Plotly.newPlot('grafico_cpu', datz2, layout);
		var cnt3 = 0;
		setInterval(function() {
			getData();
			Plotly.extendTraces('grafico_cpu', {
				y : [ [ memoria.y ] ]
			}, [ 0 ]);
			cnt3++;
			if (cnt3 > 20) {
				Plotly.relayout('grafico_cpu', {
					xaxis : {
						range : [ cnt3 - 20, cnt3 ]
					}
				});
			}
		}, 10000);

		function getData() {
			var x = $.getJSON("api/memoria", function(data) {
				memoria.y = data;
			});
		}
	</script>

	<script type="text/javascript" th:inline="javascript">
		var memoria = {
			y : 0,
		}

		var linha1 = {
			y : [ memoria.y ],
			mode : 'lines+markers',
			name : 'a',
			type : 'line'
		}
		var linha2 = {
			y : [ 0 ],
			mode : 'lines',
			line : {
				color : 'white',
			},
			name : ''
		}
		var layout = {
			title : ''
		}
		var datz2 = [ linha1, linha2 ];
		getData();
		Plotly.newPlot('grafico_rede', datz2, layout);
		var cnt4 = 0;
		setInterval(function() {
			getData();
			Plotly.extendTraces('grafico_rede', {
				y : [ [ memoria.y ] ]
			}, [ 0 ]);
			cnt4++;
			if (cnt4 > 20) {
				Plotly.relayout('grafico_rede', {
					xaxis : {
						range : [ cnt4 - 20, cnt4 ]
					}
				});
			}
		}, 10000);

		function getData() {
			var x = $.getJSON("api/memoria", function(data) {
				memoria.y = data;
			});
		}
	</script>


</body>
</html>
